#!/usr/bin/env bash

## This function parses all the arguments of a test generator
function parse_arguments()
{
    for arg in $@
    do
        parse_argument $arg
    done
}

## Internal function that parses each argument of a test generator
function parse_argument()
{
    local argument=$1
    case $argument in
        c++11)
        TG_ARG_CXX11="yes"
        ;;
        ompss)
        TG_ARG_OMPSS="yes"
        ;;
        ompss-v2)
        TG_ARG_OMPSS_V2="yes"
        ;;
        openmp)
        TG_ARG_OPENMP="yes"
        ;;
        run)
        TG_ARG_RUN="yes"
        ;;
        svml)
        # FIXME: I'd like to remove this flag at some point...
        TG_ARG_SVML="yes"
        ;;
        *)
cat << EOF
    echo "TEST-GENERATOR: unrecognized $argument argument"
EOF
        ;;
    esac
}

## This function generates the commands that mark a test as ignored
function gen_ignore_test()
{
    local ignore_reason=$1

cat <<EOF
test_ignore=yes
test_ignore_reason="${ignore_reason}"
EOF
}
